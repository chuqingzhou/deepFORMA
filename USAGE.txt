deepFORMA (code-only release)

1) Install dependencies
   - Create an environment (recommended) and install:
     pip install -r requirements.txt
   - Install this package in editable mode:
     pip install -e .

2) Minimal runnable checks (smoke tests)
   - Smoke test 1: import
     python -c "import deepforma; print(deepforma.__version__)"
   - Smoke test 2: script CLI
     python scripts/build_database.py --help
     python scripts/convert_nrrd_to_h5.py --help
     python scripts/convert_nrrd_to_h5_raw.py --help

3) Build the database
   - You need:
     - Raw MRI H5 volumes (one file per sample): <H5_RAW_DIR>/<Raw_Data_ID>.h5, with dataset 'raw' (float32, min-max normalized to [0,1])
     - An existing connected-id atlas Excel that contains 'Raw_Data_ID' column
       (used to define the sample list and carry metadata columns)
     - A trained model checkpoint (.pt)

   If you only have raw NRRD volumes (no labels), convert them to H5 raw first:
     python scripts/convert_nrrd_to_h5_raw.py \
       --raw-dir /ABS/PATH/TO/RAW_NRRD_DIR \
       --output-dir /ABS/PATH/TO/H5_RAW_DIR

   Example:
     python scripts/build_database.py \
       --model-path /ABS/PATH/TO/best_transformer.pt \
       --h5-raw-dir /ABS/PATH/TO/H5_RAW_DIR \
       --atlas-existing /ABS/PATH/TO/FORMA_Atlas_data0124_connect_id.xlsx \
       --out-root /ABS/PATH/TO/OUTPUT_DIR \
       --tag canonical_h5_minv100 \
       --out-atlas-name FORMA_Atlas_v1.0.xlsx

   Canonical defaults:
     - constant pad + z-score
     - connectivity=1 (6-neighborhood)
     - min_volume=100
     - bg_clip=1 99

4) Outputs
   - <out-root>/predictions_connected_<tag>/<sample>_connected.h5
   - <out-root>/wells_h5_<tag>/<sample>-C<id>.h5
   - <out-root>/atlas/_atlas_rows_partial_<tag>.csv (resumable)
   - <out-root>/atlas/FORMA_Atlas_v1.0.xlsx (final export when completed; name configurable)

Notes
   - This repository does not include raw data or model weights.
   - The script is resumable via the partial CSV in the output atlas folder.
